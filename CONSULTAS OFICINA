--1--
SET SERVEROUTPUT ON;
DECLARE 

CODI OFFICE.CODE_OFFICE%TYPE := &CODIGO;
OFFI OFFICE%ROWTYPE;
BEGIN

SELECT * INTO OFFI FROM OFFICE O
WHERE CODI = O.CODE_OFFICE;

DBMS_OUTPUT.PUT_LINE('CODIGO OFICINA: '||OFFI.CODE_OFFICE||' CIUDAD: '||OFFI.CITY||' PROVINCIA: '||OFFI.PROVINCE||' OBJETIVO OFFICINA: '||OFFI.OFFICE_OBJECTIVE||' VENTAS OFICINA: '||OFFI.OFFICE_SALES||' DIRECTOR: '||OFFI.OFFICE_DIRECTOR);
END;

--2--
CREATE OR REPLACE PROCEDURE CONSULTA_OFICINES
AS
    DIFERENCIA NUMBER;
    CURSOR EX2 IS
    SELECT * FROM OFFICE ORDER BY CODE_OFFICE ASC;
BEGIN
    DBMS_OUTPUT.PUT_LINE('OFICINA       DIFERENCIA');
    FOR I IN EX2 LOOP
         DIFERENCIA := I.OFFICE_OBJECTIVE-I.OFFICE_SALES;
        DBMS_OUTPUT.PUT_LINE (I.CODE_OFFICE||'         '||DIFERENCIA);
    END LOOP;

END;

--LLAMAR A LA FUNCION--
SET SERVEROUTPUT ON;

BEGIN
CONSULTA_OFICINES;
END;
--3--
CREATE OR REPLACE PROCEDURE CONSULTA_OFICINA_OBJECTIUS (OBJETIVO OFFICE.CODE_OFFICE%TYPE)
AS

CURSOR EX3 
IS
SELECT * FROM OFFICE
WHERE OFFICE.OFFICE_OBJECTIVE >= OBJETIVO;

BEGIN

FOR I IN EX3 LOOP
    IF OBJETIVO > 0 THEN
        DBMS_OUTPUT.PUT_LINE('CODIGO OFICINA: '||I.CODE_OFFICE||' CIUDAD: '||I.CITY||' PROVINCIA: '||I.PROVINCE||' OBJETIVO OFFICINA: '||I.OFFICE_OBJECTIVE||' VENTAS OFICINA: '||I.OFFICE_SALES||' DIRECTOR: '||I.OFFICE_DIRECTOR);
    ELSE
        DBMS_OUTPUT.PUT_LINE('INTRODUCE UN VALOR POSITIVO');
    END IF;
END LOOP;
END;

SET SERVEROUTPUT ON;
DECLARE

OBJETIVO NUMBER := &OBJETIVO;

BEGIN

CONSULTA_OFICINA_OBJECTIUS(OBJETIVO);

END;
